<h1>New Weight Loss Prediction</h1>

  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#formModal">
    Open Form
  </button>

  <!-- Modal -->
  <div class="modal fade" id="formModal" tabindex="-1" aria-labelledby="formModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="formModalLabel">Input Your Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="userForm">
            <div class="mb-3">
              <label for="gender" class="form-label">Gender</label>
              <select class="form-select" id="gender" required>
                <option value="" selected disabled>Choose your gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="age" class="form-label">Age (in years)</label>
              <input type="number" class="form-control" id="age" min="0" required>
            </div>
            <div class="mb-3">
            <label for="weight" class="form-label">Weight (in lbs)</label>
              <div class="form-group">
                <input type="number" class="form-control" id="weightLbs" min="0" placeholder="Weight in lbs" required>
                <input type="hidden" id="weightKg" name="snapshot[weight_kg]">
              </div>

              <script>
                document.addEventListener("DOMContentLoaded", function() {
                  const form = document.querySelector("form");
                  form.addEventListener("submit", function(event) {
                    const weightLbs = parseFloat(document.getElementById("weightLbs").value) || 0;
                    const weightKg = weightLbs * 0.453592;
                    document.getElementById("weightKg").value = weightKg.toFixed(2);
                  });
                });
              </script>
            </div>
            <div class="mb-3">
            <label for="height" class="form-label">Height (in feet and inches)</label>
              <div class="form-group">
                <input type="number" class="form-control" id="heightFeet" min="0" placeholder="Feet" required>
                <input type="number" class="form-control" id="heightInches" min="0" step="0.5" placeholder="Inches" required>
                <input type="hidden" id="heightCm" name="snapshot[height_cm]">
              </div>

              <script>
                document.addEventListener("DOMContentLoaded", function() {
                  const form = document.querySelector("form");
                  form.addEventListener("submit", function(event) {
                    const feet = parseFloat(document.getElementById("heightFeet").value) || 0;
                    const inches = parseFloat(document.getElementById("heightInches").value) || 0;
                    const heightCm = (feet * 30.48) + (inches * 2.54);
                    document.getElementById("heightCm").value = heightCm.toFixed(2);
                  });
                });
              </script>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary" form="userForm">Submit</button>
        </div>
      </div>
    </div>
  </div>

<br>

<div>
  <%= link_to "Back to snapshots", snapshots_path %>
</div>
